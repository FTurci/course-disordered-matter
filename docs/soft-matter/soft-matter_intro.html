<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>17&nbsp; Entropy matters – Complex Disordered Matter</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../soft-matter/soft-matter_colloids.html" rel="next">
<link href="../soft-matter/soft-matter_plan.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-6bb80c9187f58eb7f0e62b92359fce2b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../soft-matter/soft-matter_plan.html">Soft Matter</a></li><li class="breadcrumb-item"><a href="../soft-matter/soft-matter_intro.html"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Entropy matters</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Complex Disordered Matter</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Welcome</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Theory of disordered matter</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Background</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/Ising-model.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Ising Model</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/mean-field-theory.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Mean Field Theory</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/lattice-gas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Lattice Gas</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/rg.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Renormalization Group (RG)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/rg-effective-coupling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">RG Effective Coupling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/scaling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Scaling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/approach-to-criticality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Approach to Criticality</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/dynamics-of-fluctuations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Dynamics of Fluctuations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/Brownian-and-Langevin-dynamics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Brownian and Langevin Dynamics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/master-equation-and-diffusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Master Equation and Diffusion</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/nucleation-and-growth.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Nucleation and growth</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Problems</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../phase-transitions/literature.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literature</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Soft Matter</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../soft-matter/soft-matter_plan.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Plan</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../soft-matter/soft-matter_intro.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Entropy matters</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../soft-matter/soft-matter_colloids.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Colloids</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../soft-matter/soft-matter_polymers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Polymers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../soft-matter/soft-matter_surfactants.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Surfactants</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../soft-matter/soft-matter_glasses.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Glasses</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../soft-matter/soft-matter_readings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Readings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../soft-matter/soft-matter_problems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Problems</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#systems-and-definitions" id="toc-systems-and-definitions" class="nav-link active" data-scroll-target="#systems-and-definitions"><span class="header-section-number">17.0.1</span> Systems and definitions</a></li>
  <li><a href="#macromolecules-principal-distinguishing-features" id="toc-macromolecules-principal-distinguishing-features" class="nav-link" data-scroll-target="#macromolecules-principal-distinguishing-features"><span class="header-section-number">17.0.2</span> Macromolecules: principal distinguishing features</a></li>
  <li><a href="#brownian-motion-and-random-walks" id="toc-brownian-motion-and-random-walks" class="nav-link" data-scroll-target="#brownian-motion-and-random-walks"><span class="header-section-number">17.0.3</span> Brownian motion and random walks</a></li>
  <li><a href="#large-interface-between-dispersed-phase-and-dispersion-medium" id="toc-large-interface-between-dispersed-phase-and-dispersion-medium" class="nav-link" data-scroll-target="#large-interface-between-dispersed-phase-and-dispersion-medium"><span class="header-section-number">17.0.4</span> Large interface between dispersed phase and dispersion medium</a></li>
  <li><a href="#making-measurements-scattering-experiments" id="toc-making-measurements-scattering-experiments" class="nav-link" data-scroll-target="#making-measurements-scattering-experiments"><span class="header-section-number">17.0.5</span> Making measurements: Scattering experiments</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../soft-matter/soft-matter_plan.html">Soft Matter</a></li><li class="breadcrumb-item"><a href="../soft-matter/soft-matter_intro.html"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Entropy matters</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Entropy matters</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Most of the matter around us does not simply fit within the idealised pictures of crystallines solids or simple liquids: examples include colloids, polymers, surfactants, liquid crystals, foams, gels, and biological materials such as proteins, DNA, and cell membranes.</p>
<p>This means that cellular <strong>life itself </strong>(the very constituents that make us) obeys to principles that go beyond the standard patters of conventional solid-state physics.</p>
<p>This branch of physics is called <strong>soft condensed matter physics</strong>, or <strong>macromolecular</strong> physics, or the physics of <strong>complex fluids</strong>.</p>
<p>While we often think about problems in physics as a matter of energy minimisation, in soft-matter physics a key role is played by the <strong>fluctuations</strong>. Typically (but not exclusively) these are <strong>thermal fluctuations</strong>. This means that <strong>entropy</strong> and not only the energy from the interactions plays a key role.</p>
<p>This is because soft matter systems are typically composed of <strong>many microscopic constituents</strong> in contact with an <strong>environment</strong>. The appropriate description of the <strong>macroscopic state</strong> of such systems is therefore <strong>statistical</strong> and uses the language of <strong>statistical mechanics</strong>. The relevant <strong>energy</strong>, therefore, is the free energy of the statistical ensemble representative of the system under consideration. For example, in the canonical ensemble, this is the Helmholtz free energy</p>
<p><span id="eq-unnamed-0"><span class="math display">\[F = U-TS \tag{17.1}\]</span></span></p>
<p>where <span class="math inline">\(U\)</span> is the internal energy, <span class="math inline">\(T\)</span> the temperature and <span class="math inline">\(S\)</span> is the entropy of the system. Therefore, in a broader sense, soft matter is the physics of those systems for which the internal energy and the entropy are on comparable scales.</p>
<p>In other words, <strong>fluctuations of the internal energy</strong> are on the same scale as <strong>thermal fluctuations</strong>:</p>
<p><span id="eq-unnamed-1"><span class="math display">\[\Delta U \sim k_BT  \tag{17.2}\]</span></span></p>
<p>where <span class="math inline">\(k_B\)</span> is the Bolztmann constant and <span class="math inline">\(\Delta U\)</span> indicates standard deviations from the average internal energy.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
The Physics of Entropy
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Soft matter physics is fundamentally the physics of <strong>entropy</strong>. Unlike traditional systems where energy minimization dominates, in soft matter, entropy plays a crucial role in determining the structure, dynamics, and behavior of the system. The interplay between entropy and energy leads to the rich and diverse phenomena observed in soft matter systems.</p>
</div>
</div>
</div>
<!-- colloids, polymers and surfactants.  -->
<p>All these systems contain structural units in the colloidal length scale, <span class="math inline">\(1 \mathrm{~nm} \lesssim \mathrm{R} \lesssim 1 \mu \mathrm{~m}\)</span>.</p>
<section id="systems-and-definitions" class="level3" data-number="17.0.1">
<h3 data-number="17.0.1" class="anchored" data-anchor-id="systems-and-definitions"><span class="header-section-number">17.0.1</span> Systems and definitions</h3>
<ul>
<li>A colloid consists of a disperse phase (solid, liquid or gas ‘particles’) distributed in a finely divided state in a dispersion medium (solid, liquid or gas ‘solvent’).</li>
</ul>
<table class="caption-top table">
<colgroup>
<col style="width: 22%">
<col style="width: 25%">
<col style="width: 28%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>disp. phase &nbsp;disp. medium</th>
<th>solid</th>
<th>liquid</th>
<th>gas</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>solid</strong></td>
<td><strong>solid suspension</strong>: <em>pigmented plastics, stained glass, ruby glass, opal, pearl</em></td>
<td><strong>sol, coll. susp.</strong>: <em>metal sol, toothpaste, paint, ink, clay slurries, mud</em></td>
<td><strong>solid aerosol</strong>: <em>smoke, dust</em></td>
</tr>
<tr class="even">
<td><strong>liquid</strong></td>
<td><strong>solid emulsion</strong>: <em>bituminous road paving, ice cream</em></td>
<td><strong>emulsion</strong>: <em>milk, mayonnaise, butter, pharmaceutical creams, digestion</em></td>
<td><strong>liquid aerosol</strong>: <em>fog, mist, tobacco smoke, hair spray</em></td>
</tr>
<tr class="odd">
<td><strong>gas</strong></td>
<td><strong>solid foam</strong>: <em>zeolites, expanded polystyrene, ‘silica gel’</em></td>
<td><strong>foam</strong>: <em>froths, soap foam, fire-extinguisher</em></td>
<td>-</td>
</tr>
</tbody>
</table>
<ul>
<li>A <strong>polymer</strong> is a large molecule made up of many (hundreds to millions) repeats of a single subunit (‘monomer’). It is kept together by covalent chemical bonds. Different architectures exist: linear-chain homopolymers, (block) copolymers, starpolymers, dendrimers etc. We concentrate on linear chains, which also represents the main building block of the other structures. Examples: polyethylene, cellulose, DNA, proteins. <img src="https://cdn.mathpix.com/cropped/2025_01_27_a9af280ad9752fe3d0c0g-04.jpg?height=415&amp;width=329&amp;top_left_y=232&amp;top_left_x=235" class="img-fluid" width="212"> <img src="https://cdn.mathpix.com/cropped/2025_01_27_a9af280ad9752fe3d0c0g-04.jpg?height=421&amp;width=332&amp;top_left_y=229&amp;top_left_x=656" class="img-fluid"></li>
<li>A <strong>surfactant</strong> (SURFace ACTive AgeNT) is a special kind of molecule. In the simplest case, it has a water-loving (hydrophilic) ‘head group’, and a water-hating (hydrophobic) ‘tail’. Above a certain concentration they spontaneously selfassemble into a wide variety of structures, the simplest being a spherical micelle. They associate by (rather weak) physical interactions (‘association colloids’). Examples: <img src="https://cdn.mathpix.com/cropped/2025_01_27_a9af280ad9752fe3d0c0g-04.jpg?height=426&amp;width=752&amp;top_left_y=1009&amp;top_left_x=1086" class="img-fluid" width="334"> Sodium Dodecylsulfate (SDS), lipids.</li>
</ul>
<p>Note: In general, when in bulk form, the substance forming colloidal particles is quite insoluble in the dispersion medium. However, when the bulk material is broken down into very small pieces it can be dispersed. Such a system is called a lyophobic (‘solvent-avoiding’) colloid. Some colloidal particles themselves consist of polymers or surfactant assemblies which can easily be dispersed and are thus labelled lyophilic (‘solvent-loving’). Mostly when we talk about “colloids”, we do not care about the ‘internal’ structure of the particles, while we are in general interested in the structure of polymers or surfactant assemblies.</p>
<ul>
<li>Many liquid-state soft matter system, particular colloids and polymers can be cooled to very low temperatures without crystallizing. At these low temperatures, the typical relaxation times of the particles becomes very high, even on experimental time scales. Thus the liquid-like disorder is “frozen-in” and we refer to the system as a glass.</li>
</ul>
</section>
<section id="macromolecules-principal-distinguishing-features" class="level3" data-number="17.0.2">
<h3 data-number="17.0.2" class="anchored" data-anchor-id="macromolecules-principal-distinguishing-features"><span class="header-section-number">17.0.2</span> Macromolecules: principal distinguishing features</h3>
<section id="size-range-1-mathrmnm-lesssim-r-lesssim-1-mu-mathrmm" class="level4">
<h4 class="anchored" data-anchor-id="size-range-1-mathrmnm-lesssim-r-lesssim-1-mu-mathrmm">Size Range ( <span class="math inline">\(1 \mathrm{~nm} \lesssim R \lesssim 1 \mu \mathrm{~m}\)</span> )</h4>
<p>Lower limit (about 1 nm ): This ensures that the size of the dispersed particles is much larger than the size of the molecules forming the dispersion medium. This not only distinguishes colloids from ordinary (true) solutions, but also results in a ‘welldefined’ interface between the particles and the surrounding medium. Furthermore, (most of the time) this allows us both, to treat the dispersion medium as a continuum and to avoid quantum mechanics.</p>
</section>
<section id="upper-limit-about-1-mu-mathrmm" class="level4">
<h4 class="anchored" data-anchor-id="upper-limit-about-1-mu-mathrmm">Upper limit (about <span class="math inline">\(1 \mu \mathrm{~m}\)</span> ):</h4>
<ul>
<li>Balance of thermal and potential energy:</li>
</ul>
<p>Every particle has thermal energy <span class="math inline">\(\mathrm{E}_{\text {therm }}=(3 / 2) k_{B} T\)</span> and potential energy <span class="math inline">\(E_{\mathrm{pot}}=m g z=(4 \pi / 3) R^{3} \Delta \rho g z\)</span>, where <span class="math inline">\(z\)</span> is a characteristic length, e.g.&nbsp;<span class="math inline">\(R\)</span>, and <span class="math inline">\(\Delta \rho\)</span> is the density difference between the particle and the dispersion medium. For a significant influence of the thermal energy we need <span class="math inline">\(E_{\mathrm{pot}}&lt;E_{\text {therm }}\)</span> and thus for a typical system <span class="math inline">\(\left(\Delta \rho \approx 0.3 \mathrm{~g} \mathrm{~cm}^{-3}\right): \quad R&lt;\left(9 k_{B} T / 8 \pi \Delta \rho g\right)^{1 / 4} \approx 1 \mu \mathrm{~m}\)</span>.</p>
<section id="sedimentation" class="level5">
<h5 class="anchored" data-anchor-id="sedimentation">Sedimentation:</h5>
<p>Gravity will lead to sedimentation of the suspended particles (or creaming, if the density of the particles is lower than the density of the dispersion medium) and to the formation of a dense sediment.</p>
<p><img src="https://cdn.mathpix.com/cropped/2025_01_27_a9af280ad9752fe3d0c0g-05.jpg?height=392&amp;width=523&amp;top_left_y=1443&amp;top_left_x=1252" class="img-fluid" width="313"></p>
<p>The sedimentation velocity <span class="math inline">\(v_{\text {sed }}\)</span> results from the balance of gravity and hydrodynamic drag:</p>
<p><span id="eq-unnamed-2"><span class="math display">\[
\begin{aligned}
&amp; \quad \text { gravity: } \\
F_{g}= &amp; m_{\text {part }} g-m_{\text {liq }} g \\
= &amp; V\left(\rho_{\text {part }}-\rho_{\text {liq }}\right) g \\
&amp; =V \Delta \rho g \\
\downarrow &amp; \text { sphere } \\
&amp; F_{g}=\frac{4 \pi}{3} R^{3} \Delta \rho g
\end{aligned}
\tag{17.3}\]</span></span></p>
<p><img src="https://cdn.mathpix.com/cropped/2025_01_27_a9af280ad9752fe3d0c0g-05.jpg?height=678&amp;width=530&amp;top_left_y=1900&amp;top_left_x=803" class="img-fluid" width="276"></p>
<p>friction (Stokes law): where <span class="math inline">\(m\)</span> is the mass and <span class="math inline">\(\rho\)</span> the density of the particle (part) and liquid (liq), respectively, <span class="math inline">\(\Delta \rho\)</span> the density difference, <span class="math inline">\(V\)</span> the volume and <span class="math inline">\(R\)</span> the radius of the particle, <span class="math inline">\(\eta\)</span> the viscosity, <span class="math inline">\(v\)</span> the sedimentation velocity and <span class="math inline">\(g\)</span> the acceleration due to gravity.</p>
</section>
</section>
</section>
<section id="brownian-motion-and-random-walks" class="level3" data-number="17.0.3">
<h3 data-number="17.0.3" class="anchored" data-anchor-id="brownian-motion-and-random-walks"><span class="header-section-number">17.0.3</span> Brownian motion and random walks</h3>
<p>Random collisions with the liquid molecules cause the particle to change its direction of motion rapidly (resulting in ‘mixing’ the sample). This can be modelled as a random (drunk!) walk of <span class="math inline">\(N\)</span> steps of length <span class="math inline">\(b\)</span> with a random angle between the individual steps. How far from the origin does the particle get in N steps? <img src="https://cdn.mathpix.com/cropped/2025_01_27_a9af280ad9752fe3d0c0g-06.jpg?height=415&amp;width=313&amp;top_left_y=882&amp;top_left_x=868" class="img-fluid"></p>
<p>Average over many tries (or many particles):</p>
<p><span id="eq-unnamed-3"><span class="math display">\[
\left\langle\underline{R}&gt;=\sum_{j=1}^{N}\left\langle\underline{r}_{j}\right\rangle=0 \quad \text { since } \underline{r}_{j}\right. \text { can be in any direction }
\tag{17.4}\]</span></span></p>
<p>Mean square displacement:</p>
<p><span id="eq-unnamed-4"><span class="math display">\[
\begin{aligned}
&amp;&lt;\underline{R}^{2}&gt;=&lt;\underline{R} \cdot \underline{R}&gt;=&lt;\sum_{j=1}^{N} \underline{r}_{j} \cdot \sum_{k=1}^{N} \underline{r}_{k}&gt;=\sum_{j=1}^{N} \sum_{k=1}^{N}\left\langle\underline{r}_{j} \cdot \underline{r}_{k}&gt;\right. \\
&amp; j=k:&lt;\underline{r}_{j} \cdot \underline{r}_{k}&gt;=\left\langle\underline{r}_{j}^{2}&gt;=b^{2}\right. \\
&amp; j \neq k:&lt;\underline{r}_{j} \cdot \underline{r}_{k}&gt;=b^{2}&lt;\cos \theta&gt;=0 \quad \text { since any } \theta \text { in } 0 \leqq \theta \leqq 2 \pi \\
&amp;&lt;\underline{R}^{2}&gt;=\sum_{j=1}^{N} b^{2}=N b^{2} \propto t \quad \text { since time } t \propto N
\end{aligned}
\tag{17.5}\]</span></span></p>
<p>In fact a more careful treatment shows that the root mean-square displacement <span class="math inline">\(&lt;\underline{R}^{2}&gt;1 / 2\)</span> <span class="math inline">\(=\sqrt{2 D t} \propto \sqrt{t}\)</span> where for spherical particles the diffusion constant <span class="math inline">\(D=k_{B} T / 6 \pi \eta R\)</span>, where <span class="math inline">\(R\)</span> is the particle radius.</p>
<p>Example: Consider uncharged protein spheres in water ( <span class="math inline">\(\rho\)</span> protein <span class="math inline">\(=1.35 \mathrm{~g} \mathrm{~cm}^{-3}\)</span> ) at <span class="math inline">\(20^{\circ} \mathrm{C}(\eta\)</span> <span class="math inline">\(=1 \mathrm{Ps})\)</span>. We can calculate the displacement due to Brownian motion and sedimentation respectively as a function of the particle radius <span class="math inline">\(R\)</span>.</p>
<p>For Brownian motion, we have <span class="math inline">\(\left\langle\underline{R}^{2}\right\rangle^{1 / 2}=\sqrt{2 D t}\)</span> with <span class="math inline">\(D=k_{B} T / 6 \pi \eta R\)</span> For sedimentation, we have <span class="math inline">\(v_{\text {sed }}=2 R^{2} \Delta \rho g / 9 \eta\)</span> Hence we can make a plot of displacement versus particle radius.</p>
<table class="caption-top table">
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;">R</th>
<th style="text-align: center;"><span class="math inline">\(\mathrm{D}\left(20^{\circ} \mathrm{C}\right)\)</span></th>
<th style="text-align: center;"><span class="math inline">\(\left(\left\langle\underline{R}^{2}\right\rangle\right)^{1 / 2}\)</span> after 1 h</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"><span class="math inline">\(\mathrm{v}_{\text {sed }} \times 1 \mathrm{~h}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1 nm</td>
<td style="text-align: center;"><span class="math inline">\(2.1 \cdot 10^{-10} \mathrm{~m}^{2} / \mathrm{s}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(1230 \mu \mathrm{~m}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;">2.8 nm</td>
</tr>
<tr class="even">
<td style="text-align: center;">10 nm</td>
<td style="text-align: center;"><span class="math inline">\(2.1 \cdot 10^{-11} \mathrm{~m}^{2} / \mathrm{s}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(390 \mu \mathrm{~m}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(0.3 \mu \mathrm{~m}\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">100 nm</td>
<td style="text-align: center;"><span class="math inline">\(2.1 \cdot 10^{-12} \mathrm{~m}^{2} / \mathrm{s}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(123 \mu \mathrm{~m}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&gt;\)</span></td>
<td style="text-align: center;"><span class="math inline">\(30 \mu \mathrm{~m}\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;"><span class="math inline">\(1 \mu \mathrm{~m}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(2.1 \cdot 10^{-13} \mathrm{~m}^{2} / \mathrm{s}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(39 \mu \mathrm{~m}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&lt;\)</span></td>
<td style="text-align: center;">3 mm</td>
</tr>
<tr class="odd">
<td style="text-align: center;"><span class="math inline">\(10 \mu \mathrm{~m}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(2.1 \cdot 10^{-14} \mathrm{~m}^{2} / \mathrm{s}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(12 \mu \mathrm{~m}\)</span></td>
<td style="text-align: center;"><span class="math inline">\(&lt;\)</span></td>
<td style="text-align: center;">0.3 m</td>
</tr>
</tbody>
</table>
<p><img src="https://cdn.mathpix.com/cropped/2025_01_27_a9af280ad9752fe3d0c0g-07.jpg?height=855&amp;width=1134&amp;top_left_y=1047&amp;top_left_x=493" class="img-fluid"></p>
<p>More generally we can write down equations which express the probability of finding a particle at a given vector displacement from its starting point. In the limit of a large number of random steps, one finds that in 1 dimension this probability is given by</p>
<p><span id="eq-unnamed-5"><span class="math display">\[
P_{N}(x) d x=\frac{1}{\sqrt{2 \pi&lt;(\Delta x)^{2}&gt;}} e^{-\frac{(x-\langle x\rangle)^{2}}{\left.2&lt;(\Delta x)^{2}\right\rangle}} d x \quad \text { A 1d Gaussian distribution }
\tag{17.6}\]</span></span></p>
<p>This has mean <span class="math inline">\(\langle x\rangle=0\)</span> and variance <span class="math inline">\(\left\langle(\Delta x)^{2}\right\rangle \equiv \sigma^{2}&gt;0\)</span>.</p>
<p>In 3 dimensions, the corresponding relation is</p>
<p><span id="eq-unnamed-6"><span class="math display">\[
P(\underline{r}) d \underline{r}=\frac{1}{\left(2 \pi \sigma^{2}\right)^{3 / 2}} e^{-r^{2} / 2 \sigma^{2}} d \underline{r}
\tag{17.7}\]</span></span></p>
<p>The distribution has its first moment at the origin and second moment</p>
<p><span id="eq-unnamed-7"><span class="math display">\[
\left\langle\underline{r}^{2}\right\rangle=\int_{-\infty}^{\infty} \underline{r}^{2} P(\underline{r}) d \underline{r}=\frac{1}{\left(2 \pi \sigma^{2}\right)^{3 / 2}} \int_{0}^{\pi} \sin \theta d \theta \int_{0}^{2 \pi} d \phi \int_{0}^{\infty} r^{4} e^{-r^{2} / 2 \sigma^{2}} d r=3 \sigma^{2}
\tag{17.8}\]</span></span></p>
<p>This latter result can also be obtained in a direct calculation, considering <span class="math inline">\(N\)</span> random steps in x direction, <span class="math inline">\(N\)</span> in y direction and <span class="math inline">\(N\)</span> in z direction with <span class="math inline">\(\left\langle x^{2}\right\rangle=\left\langle y^{2}\right\rangle=\left\langle z^{2}\right\rangle=\sigma^{2}\)</span> and thus <span class="math inline">\(\left\langle\underline{r}^{2}\right\rangle=\left\langle x^{2}\right\rangle+\left\langle y^{2}\right\rangle+\left\langle z^{2}\right\rangle=3 \sigma^{2}=N b^{2}\)</span></p>
</section>
<section id="large-interface-between-dispersed-phase-and-dispersion-medium" class="level3" data-number="17.0.4">
<h3 data-number="17.0.4" class="anchored" data-anchor-id="large-interface-between-dispersed-phase-and-dispersion-medium"><span class="header-section-number">17.0.4</span> Large interface between dispersed phase and dispersion medium</h3>
<p>In commercial terms it is often highly desirable to produce soft matter systems whose (chemical) properties lie somewhere between those of bulk and molecularly dispersed systems, i.e.&nbsp;whose properties are not just the sum of the contributions from the molecules in the bulk phases. To achieve this, a significant proportion of the molecules should lie within or close to the particle-medium interface, which is equivalent to a large surface-to-volume ratio (‘microheterogeneous’ systems, link to surface science). <img src="https://cdn.mathpix.com/cropped/2025_01_27_a9af280ad9752fe3d0c0g-09.jpg?height=903&amp;width=1063&amp;top_left_y=321&amp;top_left_x=496" class="img-fluid"></p>
<p>Often colloidal particles have a spherical shape, which allows for a relatively small surface-to-volume ratio, but they may also be ellipsoids (prolate or oblate), discs, rods, fibres, random coils etc.</p>
</section>
<section id="making-measurements-scattering-experiments" class="level3" data-number="17.0.5">
<h3 data-number="17.0.5" class="anchored" data-anchor-id="making-measurements-scattering-experiments"><span class="header-section-number">17.0.5</span> Making measurements: Scattering experiments</h3>
<p><img src="https://cdn.mathpix.com/cropped/2025_01_27_a9af280ad9752fe3d0c0g-09.jpg?height=456&amp;width=1318&amp;top_left_y=1710&amp;top_left_x=238" class="img-fluid"></p>
<p>The most commonly used experimental tool for studying soft matter systems is scattering. The experiment may utilize light, neutrons or X-rays as the scattering probe. Due to the random arrangement of particles, a random diffraction pattern is observed. This fluctuates as particles move in Brownian motion. The scattered intensity as measured under a certain scattering angle will thus also fluctuate with time (given the detector area is small enough).</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../soft-matter/soft-matter_plan.html" class="pagination-link" aria-label="Plan">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Plan</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../soft-matter/soft-matter_colloids.html" class="pagination-link" aria-label="Colloids">
        <span class="nav-page-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Colloids</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>